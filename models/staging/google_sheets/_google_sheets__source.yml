version: 2
sources:
  - name: google_sheets
    schema: google_sheets
    database: ALUMNO5_DEV_BRONZE_DB
    quoting:
      database: false
      schema: false
      identifier: false
    freshness:
      warn_after:
        count: 24
        period: hour
      error_after:
        count: 72
        period: hour
    tables:
      - name: budget
        loaded_at_field: _fivetran_synced
        columns:
          - name: _row
            tests:
              - unique
              - not_null
          - name: product_id
            tests:
              - not_null
              - accepted_values:
                  values: ['A123', 'B456', 'C789']  # Sustituir con los valores válidos si hay un conjunto definido.
          - name: quantity
            tests:
              - not_null
              - numeric
              - relationships:
                  to: ref('products')  # Cambiar por la tabla correcta si hay una referencia externa.
                  field: product_id
          - name: month
            tests:
              - not_null
              - accepted_values:
                  values: 
                    - '2024-01-01'  # Actualizar con valores válidos si corresponden.
                    - '2024-02-01'
                    - '2024-03-01'
              - unique
          - name: _fivetran_synced
            tests:
              - not_null
              - datetime
